<!doctype html>
<html lang="vi">
    <head>
        <!-- Required meta tags -->
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.2/css/bootstrap.min.css" integrity="sha512-rt/SrQ4UNIaGfDyEXZtNcyWvQeOq0QLygHluFQcSjaGB04IxWhal71tKuzP6K8eYXYB6vJV4pHkXcmFGGQ1/0w==" crossorigin="anonymous" referrerpolicy="no-referrer">
        <!-- Bootswatch Theme -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/5.2.3/spacelab/bootstrap.min.css" integrity="sha512-kb6aHe8Fchic05HVLuEio/LWsmwtNRndUxZ5AqK4IyMG817Dhff2BxuKJCRPWzQ4daCxN5TagQ5s8Hpo9YJgbQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.1/css/all.min.css" integrity="sha512-MV7K8+y+gLIBoVD59lQIYicR65iaqukzvf/nwasF0nqhPay5w/9lJmVM2hMDcnK1OnMGCdVK+iQrJ7lzPJQd1w==" crossorigin="anonymous" referrerpolicy="no-referrer">

        <link rel="icon" sizes="512x512" href="./favicon.png">
        <meta property="og:image" content="./200x200.png">
        <meta property="og:image:alt" content="Chatbox">
        <meta property="og:image:width" content="200" >
        <meta property="og:image:height" content="200" >
        <meta name="description" content="Ứng dụng chat miễn phí với trí thông minh nhân tạo nổi tiếng ChatGPT của OpenAI">
        <meta name="og:description" content="Ứng dụng chat miễn phí với trí thông minh nhân tạo nổi tiếng ChatGPT của OpenAI">
        <meta name="og:title" content="Chatbox - Powered by ChatGPT">
        <title>Chatbox - Powered by ChatGPT</title>
        <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3585118770961536" crossorigin="anonymous"></script>
        <!-- Google tag (gtag.js) -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-KDNS75K5C2"></script>
        <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'G-KDNS75K5C2');
        </script>
        <style>
            body {
                padding-top: 20px;
            }
            body.waiting, body.waiting textarea {
                cursor: wait;
            }
            #chatbox {
                min-height: 210px;
            }
            p.botTitle {
                margin-bottom: -30px;
            }
            p.answer {
                white-space: pre-line;
            }
            #credit {
                margin-top: -15px;
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="row">
                <div class="col-md-8 offset-md-2">
                    <div class="card bg-light shadow-lg rounded">
                        <div class="card-header">
                            <i class="fa-solid fa-comment"></i> Chatbox - Powered by ChatGPT
                        </div>
                        <div class="card-body" id="chatbox">
                        </div>
                        <div class="card-footer">
                            <form>
                                <div class="form-group mt-2">
                                    <textarea class="form-control" id="message" rows="5"></textarea>
                                </div>
                                <button id="enter" type="submit" class="btn btn-primary"><i class="fa-solid fa-paper-plane"></i> Gửi</button>
                                <a id="erase" class="btn btn-secondary"><i class="fa-solid fa-xmark"></i> Xóa</a>
                            </form>
                            <a href="https://cotuong.top/" target="_blank" class="float-right" id="credit"><i class="fa-solid fa-copyright"></i> Cờ tướng</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.3/jquery.min.js" integrity="sha512-STof4xm1wgkfm7heWqFJVn58Hm3EtS31XFaagaa8VMReCXAkQnJZ+jEy8PCC/iT18dFy95WcExNHFTqLyp72eQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.6.2/js/bootstrap.bundle.min.js" integrity="sha512-igl8WEUuas9k5dtnhKqyyld6TzzRjvMqLC79jkgT3z02FvJyHAuUtyemm/P/jYSne1xwFI06ezQxEwweaiV7VA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/6.0.0/bootbox.min.js" integrity="sha512-oVbWSv2O4y1UzvExJMHaHcaib4wsBMS5tEP3/YkMP6GmkwRJAa79Jwsv+Y/w7w2Vb/98/Xhvck10LyJweB8Jsw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script>
            function sendMessage() {
                var message = $('#message').val();
                if (message && message != '' && !message.includes('<') && !message.includes('>')) {
                    $('#chatbox').append('<p><u>Tôi:</u></p>');
                    $('#chatbox').append('<p>' + message + '</p>');
                    const botAnswer = setTimeout(() => {
                        $.ajax({
                            'type': 'POST',
                            'url': './process.php',
                            'data': {
                                'message': message
                            },
                            'dataType': 'text'
                        }).done(function(answer){
                            $('#chatbox').append('<p class="botTitle"><u>Máy:</u></p>');
                            $('#chatbox').append('<p class="answer">' + answer + '</p>');
                        });
                    }, 200);
                    $('#message').val('');
                } else {
                    bootbox.alert({
                        message: 'Câu hỏi không hợp lệ!',
                        size: 'small',
                        centerVertical: true,
                        closeButton: false
                    });
                }
            }
            $(document).ready(function() {
                $('form').submit(function(e) {
                    e.preventDefault();
                    sendMessage();
                });
                $('#message').keypress(function(e) {
                    if(e.which == 13) {
                        e.preventDefault();
                        sendMessage();
                    }
                });
                $('#erase').on('click', function(){
                    $('#chatbox').html('');
                });
            }).ajaxStart(function(){
                $('body').addClass('waiting');
                $('#erase').addClass('disabled');
                $('textarea#message, #enter').attr('disabled', true);
            }).ajaxComplete(function () {
                $('body').removeClass('waiting');
                $('#erase').removeClass('disabled');
                $('textarea#message, #enter').attr('disabled', false);
            });
        </script>
    </body>
</html>
